<!DOCTYPE html>
<html>
 <head>
  <title>1/2 Inch Handwriting Worksheet Generator</title>
<link rel="apple-touch-icon" sizes="57x57" href="apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="144x144" href="apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="60x60" href="apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="152x152" href="apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="favicon-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="favicon-160x160.png" sizes="160x160">
<link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
<meta name="msapplication-TileColor" content="#00a300">
<meta name="msapplication-TileImage" content="mstile-144x144.png">
  <!-- Import fonts-->
  <link rel="stylesheet" href="fonts.css" type="text/css" />
  <!-- Import jsPDF (to convert Canvas to PDF), plus image plugin-->
  <script src="jspdf.min.js" type="text/javascript"></script>
  <script src="jspdf.plugin.addimage.js" type="text/javascript"></script>
  <!-- Import custom Drawing functions -->
  <script type="text/javascript">
function clearForm()
    {
      document.getElementById("title").value = "";
      for(var i = 1; i < 9; i++)
         {
           document.getElementById("R"+i).value = "";
         }

       refresh(document.getElementById('canvas'));
    }
    
   /* function refresh(canvas)
    {
    var context = canvas.getContext('2d');
    context.fillRect ( 0, 0, 850, 1100);
    var imageObj = new Image();
      imageObj.onload = function() {
        context.drawImage(imageObj, 0, 0);
      };
      imageObj.src = './1:2paper.png';
    }*/

    function publish(canvas)
    {
     var pdf = new jsPDF();
     console.log(pdf);
     pdf.addImage(canvas, 'JPEG', 0, 0);
     console.log(pdf);
     pdf.output('pdfjsnewwindow');
    }


    function draw(canvas)
    {
      refresh(canvas);
      
      var ctx=canvas.getContext("2d");
      var startPos=50;
      ctx.fillStyle = '#000000';

      var style=document.getElementById("style").value;
      var title=document.getElementById("title").value;
      var r1=document.getElementById("R1").value;
      var r2=document.getElementById("R2").value;
      var r3=document.getElementById("R3").value;
      var r4=document.getElementById("R4").value;
      var r5=document.getElementById("R5").value;
      var r6=document.getElementById("R6").value;
      var r7=document.getElementById("R7").value;
      var r8=document.getElementById("R8").value;
      var r9=document.getElementById("R9").value;
      var r10=document.getElementById("R10").value;
      var r11=document.getElementById("R11").value;
      var r12=document.getElementById("R12").value;

      ctx.font="40px Arial";
      ctx.lineWidth=3;
      ctx.textAlign="center";
      ctx.fillText(title, 408, 55);
      ctx.textAlign="left";

      if(style == "print")
      {
      ctx.font="70px print_dashed";


      ctx.fillText(r1, startPos, 177);
      ctx.fillText(r2, startPos, 252);
      ctx.fillText(r3, startPos, 327);
      ctx.fillText(r4, startPos, 402);
      ctx.fillText(r5, startPos, 477);
      ctx.fillText(r6, startPos, 552);
      ctx.fillText(r7, startPos, 627);
      ctx.fillText(r8, startPos, 702);
      ctx.fillText(r9, startPos, 777);
      ctx.fillText(r10, startPos, 852);
      ctx.fillText(r11, startPos, 927);
      ctx.fillText(r12, startPos, 1002);
      }
      else{
      ctx.font="75px cursive_dashed"

      ctx.fillText(r1, startPos, 178);
      ctx.fillText(r2, startPos, 253);
      ctx.fillText(r3, startPos, 328);
      ctx.fillText(r4, startPos, 403);
      ctx.fillText(r5, startPos, 478);
      ctx.fillText(r6, startPos, 553);
      ctx.fillText(r7, startPos, 628);
      ctx.fillText(r8, startPos, 703);
      ctx.fillText(r9, startPos, 778);
      ctx.fillText(r10, startPos, 853);
      ctx.fillText(r11, startPos, 928);
      ctx.fillText(r12, startPos, 1003);
      }
    }

/* This dashedLine function was written by Jignesh Variya and posted on StackOverflow */
CanvasRenderingContext2D.prototype.dashedLine = function (x1, y1, x2, y2, dashLen) {
    if (dashLen == undefined) dashLen = 2;
    this.moveTo(x1, y1);

    var dX = x2 - x1;
    var dY = y2 - y1;
    var dashes = Math.floor(Math.sqrt(dX * dX + dY * dY) / dashLen);
    var dashX = dX / dashes;
    var dashY = dY / dashes;

    var q = 0;
    while (q++ < dashes) {
        x1 += dashX;
        y1 += dashY;
        this[q % 2 == 0 ? 'moveTo' : 'lineTo'](x1, y1);
    }
    this[q % 2 == 0 ? 'moveTo' : 'lineTo'](x2, y2);
};


function refresh(canvas)
{
  var ctx = canvas.getContext('2d');
  var startPos = 45;
  var endPos = startPos+720;

  ctx.fillStyle = '#ffffff';
  ctx.fillRect(0,0,850,1100);
  
  ctx.strokeStyle = '#000000';
  ctx.lineWidth = 1;

  ctx.beginPath();

  ctx.moveTo(startPos, 130);
  ctx.lineTo(endPos, 130);
  ctx.dashedLine(startPos, 154, endPos, 154, 4);
  ctx.moveTo(startPos, 178);
  ctx.lineTo(endPos, 178);

// there should be 24 pixels between each top-middle-bottom, 48 top-to-bottom

  ctx.moveTo(startPos, 205);
  ctx.lineTo(endPos, 205);
  ctx.dashedLine(startPos, 229, endPos, 229, 4);
  ctx.moveTo(startPos, 253);
  ctx.lineTo(endPos, 253);

// 27 pixels between bottom of one and top of next

  ctx.moveTo(startPos, 280);
  ctx.lineTo(endPos, 280);
  ctx.dashedLine(startPos, 304, endPos, 304, 4);
  ctx.moveTo(startPos, 328);
  ctx.lineTo(endPos, 328);

  ctx.moveTo(startPos, 355);
  ctx.lineTo(endPos, 355);
  ctx.dashedLine(startPos, 379, endPos, 375, 4);
  ctx.moveTo(startPos, 403);
  ctx.lineTo(endPos, 403);

  ctx.moveTo(startPos, 430);
  ctx.lineTo(endPos, 430);
  ctx.dashedLine(startPos, 454, endPos, 454, 4);
  ctx.moveTo(startPos, 478);
  ctx.lineTo(endPos, 478);

  ctx.moveTo(startPos, 505);
  ctx.lineTo(endPos, 505);
  ctx.dashedLine(startPos, 529, endPos, 529, 4);
  ctx.moveTo(startPos, 553);
  ctx.lineTo(endPos, 553);

  ctx.moveTo(startPos, 580);
  ctx.lineTo(endPos, 580);
  ctx.dashedLine(startPos, 604, endPos, 604, 4);
  ctx.moveTo(startPos, 628);
  ctx.lineTo(endPos, 628);

  ctx.moveTo(startPos, 655);
  ctx.lineTo(endPos, 655);
  ctx.dashedLine(startPos, 679, endPos, 679, 4);
  ctx.moveTo(startPos, 703);
  ctx.lineTo(endPos, 703);

  ctx.moveTo(startPos, 730);
  ctx.lineTo(endPos, 730);
  ctx.dashedLine(startPos, 754, endPos, 754, 4);
  ctx.moveTo(startPos, 778);
  ctx.lineTo(endPos, 778);

  ctx.moveTo(startPos, 805);
  ctx.lineTo(endPos, 805);
  ctx.dashedLine(startPos, 829, endPos, 829, 4);
  ctx.moveTo(startPos, 853);
  ctx.lineTo(endPos, 853);

  ctx.moveTo(startPos, 880);
  ctx.lineTo(endPos, 880);
  ctx.dashedLine(startPos, 904, endPos, 904, 4);
  ctx.moveTo(startPos, 928);
  ctx.lineTo(endPos, 928);

  ctx.moveTo(startPos, 955);
  ctx.lineTo(endPos, 955);
  ctx.dashedLine(startPos, 979, endPos, 979, 4);
  ctx.moveTo(startPos, 1003);
  ctx.lineTo(endPos, 1003);

  ctx.stroke();  
}
</script>
  <link rel="stylesheet" href="css.css" type="text/css" />
 </head>
 <body>
  <p class="print">Handwriting Worksheet Generator</p>
  <a class="return" href="index.html">Return to Size Select</a><br><br>
<table>
  <tr>
  <td class="main"><label for="style">Style:</label></td>
  <td><select id="style">
	<option selected value="print">Print</option>
        <option value="cursive">Cursive</option>
      </select></td>
  </tr>
  <tr>
  <td class="main"><label for="title">Title:</label></td>
  <td><input type="text" id="title" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R1">Row 1:</label></td>
  <td><input type="text" id="R1" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R2">Row 2:</label></td>
  <td><input type="text" id="R2" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R3">Row 3:</label></td>
  <td><input type="text" id="R3" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R4">Row 4:</label></td>
  <td><input type="text" id="R4" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R5">Row 5:</label></td>
  <td><input type="text" id="R5" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R6">Row 6:</label></td>
  <td><input type="text" id="R6" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R7">Row 7:</label></td>
  <td><input type="text" id="R7" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td class="main"><label for="R8">Row 8:</label></td>
  <td><input type="text" id="R8" maxlength="18" size="20"/></td>
  </tr>
  <td class="main"><label for="R9">Row 9:</label></td>
  <td><input type="text" id="R9" maxlength="18" size="20"/></td>
  </tr>
  <td class="main"><label for="R10">Row 10:</label></td>
  <td><input type="text" id="R10" maxlength="18" size="20"/></td>
  </tr>
  <td class="main"><label for="R11">Row 11:</label></td>
  <td><input type="text" id="R11" maxlength="18" size="20"/></td>
  </tr>
  <td class="main"><label for="R12">Row 12:</label></td>
  <td><input type="text" id="R12" maxlength="18" size="20"/></td>
  </tr>
  <tr>
  <td><button type="button" onclick="draw(document.getElementById('canvas'));">Generate Preview</button></td>
  <td><button type="button" onclick="clearForm();">Clear Form</button>
  <button type="button" onclick="publish(document.getElementById('canvas'));">Generate PDF</button></td>
  </tr>
</table>
  <p>Preview</p>
  <canvas id="canvas" width="816" height="1056">This browser is either out of date or does not support HTML5. Please upgrade your browser.</canvas>
  <script type="text/javascript">
   refresh(document.getElementById('canvas'));
    </script><noscript>JavaScript is required to run this. Please turn it on if it is off, or upgrade your browser.</noscript><br>

  <p class="cursive">Version 1&nbsp;.&nbsp;2&nbsp;.&nbsp;0<br> &copy; 2015 Ben Dunphy<br>This Project arose out of a homeshcooling mom's tapping into her son's programming skills.</p>
 </body>
</html>
